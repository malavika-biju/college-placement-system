{% load static %}
{% include 'company/header.html' %}
   
   <!-- HOME -->
  <section class="section-hero home-section overlay inner-page bg-image" style="background-image: url({% static 'company/assets/images/hero_1.jpg' %});" id="home-section">

      <div class="container">
        <div class="row align-items-center justify-content-center">
          <div class="col-md-12">
            <div class="mb-5 text-center">
              <h1 class="text-white font-weight-bold">The Easiest Way To Get Your Dream Job</h1>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate, quas fugit ex!</p>
            </div>
            <form method="post" class="search-jobs-form">
              <div class="row mb-5">
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <input type="text" class="form-control form-control-lg" placeholder="Job title, Company...">
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%" data-live-search="true" title="Select Region">
                    <option>Anywhere</option>
                    <option>San Francisco</option>
                    <option>Palo Alto</option>
                    <option>New York</option>
                    <option>Manhattan</option>
                    <option>Ontario</option>
                    <option>Toronto</option>
                    <option>Kansas</option>
                    <option>Mountain View</option>
                  </select>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%" data-live-search="true" title="Select Job Type">
                    <option>Part Time</option>
                    <option>Full Time</option>
                  </select>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                  <button type="submit" class="btn btn-primary btn-lg btn-block text-white btn-search"><span class="icon-search icon mr-2"></span>Search Job</button>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12 popular-keywords">
                  <h3>Trending Keywords:</h3>
                  <ul class="keywords list-unstyled m-0 p-0">
                    <li><a href="#" class="">UI Designer</a></li>
                    <li><a href="#" class="">Python</a></li>
                    <li><a href="#" class="">Developer</a></li>
                  </ul>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <a href="#next" class="scroll-button smoothscroll">
        <span class=" icon-keyboard_arrow_down"></span>
      </a>
    </section>

    
    <section class="site-section" id="next">
      <div class="container">

        <!-- Section Heading -->
        <div class="row mb-5 justify-content-center">
          <div class="col-md-7 text-center">
            <h2 class="section-title mb-2">Recent Job Listings</h2>
            <p class="lead">Browse through our latest job opportunities</p>
          </div>
        </div>

        <!-- Job Listings Header -->
        <div class="row mb-3">
          <div class="col-12">
            <h3 class="border-bottom pb-2">Available Positions</h3>
          </div>
        </div>

        <!-- Job Listings -->
        {% if jobposts %}
          <ul class="job-listings mb-5">
            {% for jobpost in jobposts %}
            <li class="job-listing d-block d-sm-flex pb-3 pb-sm-0 align-items-center">
              
              <a href="#" class="job-listing-logo"></a>
              <div class="job-listing-logo">
                <img src="/images/{{ jobpost.photo }}" alt="{{ jobpost.position }}" class="img-fluid">
              </div>

              <div class="job-listing-about d-sm-flex custom-width w-100 justify-content-between mx-4">
                <div class="job-listing-position custom-width w-50 mb-3 mb-sm-0">
                  <h4 class="mb-1">{{ jobpost.position }}</h4>
                  <strong class="text-muted">Requirements: {{ jobpost.requirement }}</strong>
                  <br>
                  <small class="text-info">Cutoff Mark: {{ jobpost.cutoff_mark }}</small>
                </div>
                <div class="job-listing-location mb-3 mb-sm-0 custom-width w-25">
                  <span class="icon-calendar mr-1"></span> 
                  <strong>Posted:</strong> {{ jobpost.post_date|date:"M d, Y" }}
                  <br>
                  <span class="icon-clock-o mr-1"></span>
                  <strong>Deadline:</strong> {{ jobpost.application_end_date|date:"M d, Y" }}
                </div>
               <!-- Edit and Delete Buttons with proper Bootstrap styling -->
<!-- Edit and Delete Buttons - SIMPLE WORKING VERSION -->
<div class="job-listing-meta">
  <div class="d-flex flex-column align-items-start">
    {% if jobpost.status == 'open' %}
      <span class="badge badge-success mb-2">Open</span>
    {% else %}
      <span class="badge badge-secondary mb-2">Closed</span>
    {% endif %}
    
    <!-- Buttons with CSS to ensure they're clickable -->
    <div class="d-flex" style="position: relative; z-index: 9999;">
      <a href="{% url 'edit_job' jobpost.jobpost_id %}" class="btn btn-warning btn-sm mr-2" 
         style="position: relative; z-index: 10000;">
        <span class="icon-edit mr-1"></span>Edit
      </a>
      <a href="{% url 'delete_job' jobpost.jobpost_id %}" class="btn btn-danger btn-sm" 
         onclick="return confirm('Are you sure you want to delete this job?');"
         style="position: relative; z-index: 10000;">
        <span class="icon-trash mr-1"></span>Delete
      </a>
    </div>
  </div>
</div>
                  </div>
                </div>
              </div>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <!-- No Jobs Available Message -->
          <div class="row mb-5 justify-content-center">
            <div class="col-md-8 text-center">
              <div class="alert alert-info">
                <h4>No Job Listings Available</h4>
                <p>Check back soon for new opportunities!</p>
              </div>
            </div>
          </div>
        {% endif %}

        <!-- Pagination -->
        <div class="row pagination-wrap">
          <div class="col-md-6 text-center text-md-left mb-4 mb-md-0">
            <span>Showing {{ jobposts.start_index }}-{{ jobposts.end_index }} of {{ jobposts.paginator.count }} Jobs</span>
          </div>
          <div class="col-md-6 text-center text-md-right">
            <div class="custom-pagination ml-auto">
              {% if jobposts.has_previous %}
                <a href="?page={{ jobposts.previous_page_number }}" class="prev">Prev</a>
              {% endif %}
              
              <div class="d-inline-block">
                {% for num in jobposts.paginator.page_range %}
                  {% if jobposts.number == num %}
                    <a href="?page={{ num }}" class="active">{{ num }}</a>
                  {% else %}
                    <a href="?page={{ num }}">{{ num }}</a>
                  {% endif %}
                {% endfor %}
              </div>
              
              {% if jobposts.has_next %}
                <a href="?page={{ jobposts.next_page_number }}" class="next">Next</a>
              {% endif %}
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-5 bg-image overlay-primary fixed overlay" style="background-image: url('images/hero_1.jpg');">
      <div class="container"> 
        <div class="row align-items-center">
          <div class="col-md-8">
            <h2 class="text-white">Looking For A Job?</h2>
            <p class="mb-0 text-white lead">Lorem ipsum dolor sit amet consectetur adipisicing elit tempora adipisci impedit.</p>
          </div>
          <div class="col-md-3 ml-auto">
            <a href="#" class="btn btn-warning btn-block btn-lg">Sign Up</a>
          </div>
        </div>
      </div>
    </section>

    
    

        {% load static %}
        {% include 'company/footer.html' %}